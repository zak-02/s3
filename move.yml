resources:
- name: concourse-examples
  type: git
  icon: github
  source:
    uri: https://github.com/zak-02/s3

jobs:
  - name: s3-job
    plan:
      - get: concourse-examples
      - task: s3-task
        params:  # ðŸ‘ˆ Injects secrets into the environment
          AWS_ACCESS_KEY_ID: ((AWS_ACCESS_KEY_ID))
          AWS_SECRET_ACCESS_KEY: ((AWS_SECRET_ACCESS_KEY))
        config:
          platform: linux
          image_resource:
            type: registry-image
            source:
              repository: python
          inputs:
            - name: concourse-examples
          run:
            path: sh
            args:
              - -c
              - |
                cd concourse-examples
                echo "Access Key: $AWS_ACCESS_KEY_ID"
                echo "Secret Key: $AWS_SECRET_ACCESS_KEY"
                python upload.py